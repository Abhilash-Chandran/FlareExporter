(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(29),o=a.n(l),r=(a(39),a(40),a(1)),s=a(3),c=a(4),d=a(7),h=a(5),m=a(6),u=a(13),p=a.n(u),b=a(12),f=(a(20),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Input-Field-With-Label"},i.a.createElement("input",{type:this.props.type,value:this.props.value,onChange:this.handleChange,className:"InputField"}),i.a.createElement("label",{className:"FieldLabel"},this.props.label))}}]),t}(n.Component)),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.options;return i.a.createElement("div",{className:"Selection-Field-With-Label"},i.a.createElement("select",{className:"SelectField",onChange:this.handleChange},i.a.createElement("optgroup",null),Object.keys(t).map(function(a){return i.a.createElement("optgroup",{key:a,label:a},t[a].map(function(t,n){return i.a.createElement("option",{key:a+"_"+e.props.label+"_"+n,value:t},t)}))}),i.a.createElement("optgroup",null)),i.a.createElement("label",{className:"FieldLabel"},this.props.label),this.props.experimental&&i.a.createElement("div",{className:"ExperimentalNote"},"experimental"))}}]),t}(n.Component),g=(a(41),function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this))).animations=[],n._currentAnimation=null,n.currentAnimationName=e,n._animTime=0,n._animationShouldRepeat=a,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"initialize",value:function(e){var t=this;this.animations=e.animations,""===this.currentAnimationName?this._currentAnimation=this.animations[0]:this._currentAnimation=this.animations.find(function(e){return e._Name===t.currentAnimationName})}},{key:"advance",value:function(e,t){this._animTime+=t;var a=this._currentAnimation,n=this._animTime;return a.apply(n%a.duration,e,1),!(!this._animationShouldRepeat&&n===a.duration)}}]),t}(p.a.Controller)),y=(a(42),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){a.props.disabled||(null!=a.props.toggleClass&&a.BtnRef.current.classList.toggle(a.props.toggleClass),a.props.handleClick(e),null!=a.props.alterLabel&&(a.currentLabel=a.alterLabel?a.props.alterLabel:a.props.label,a.alterLabel=!a.alterLabel))},a.BtnRef=i.a.createRef(),a.currentLabel=a.props.label,a.alterLabel=!0,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{onClick:this.handleClick,className:"IconStyle"},i.a.createElement("div",{className:"OuterCircle"+(this.props.disabled?" disabled":"")},i.a.createElement("div",{ref:this.BtnRef,className:this.props.buttonName+" icon"+(this.props.disabled?" disabled":"")}),this.props.iconText&&i.a.createElement("label",{htmlFor:this.props.labelFor,className:"IconText"},this.props.iconText))),i.a.createElement("label",{className:"IconLabel"},this.currentLabel))}}]),t}(n.Component)),C={"1440p":2e7,"1080p":1e7,"720p":65e5},R={"1440p":3e7,"1080p":15e6,"720p":95e5},O={"1440p":16e6,"1080p":8e6,"720p":5e6,"480p":25e5,"360p":1e6},E={"1440p":24e6,"1080p":12e6,"720p":75e5,"480p":4e6,"360p":15e5};function j(e,t,a){return console.log(e),"HDR"===t?[24,25,30].includes(e)?C[a]:R[a]:[24,25,30].includes(e)?O[a]:E[a]}var w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this))).handleFileSelect=function(e){e.preventDefault(),e.target.value.length>0&&a.setState(Object(r.a)({},a.state,{isAnimationPaused:!0,flareController:new g("",!1),selectedFile:e.target.files[0],recordAnimationDisabled:!1,playAnimationDisabled:!1}))},a.handleDragOver=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},a.handleDragLeave=function(e){e.stopPropagation(),e.preventDefault()},a.handleDrop=function(e){e.preventDefault(),a.setState(Object(r.a)({},a.state,{isAnimationPaused:!0,flareController:new g(""),selectedFile:e.dataTransfer.files[0],recordAnimationDisabled:!1}))},a.handlePlayPauseAnimation=function(e){console.log("Play pause is being caled."),a.state.isAnimationPaused?a.setState(Object(r.a)({},a.setState,{downloadVideoDisabled:!1,isAnimationPaused:!1})):a.setState(Object(r.a)({},a.setState,{isAnimationPaused:!0}))},a.handleCanvasWidthChange=function(e){a.setState(Object(r.a)({},a.state,{canvasWidth:Number.parseInt(e)}))},a.handleCanvasHeightChange=function(e){a.setState(Object(r.a)({},a.state,{canvasHeight:Number.parseInt(e)}))},a.handleAnimationNameChange=function(e){a.setState(Object(r.a)({},a.state,{flareController:new g(e.target.value)}))},a.handleFlareComponentLoaded=function(e){console.log("On loade is called with"),a.setState(Object(r.a)({},a.state,{animations:a.state.flareController.animations.map(function(e){return e._Name})}))},a.handleVideoTypeChange=function(e){a.setState(Object(r.a)({},a.state,{videoType:e.target.value}))},a.handleRecording=function(e){a.state.isRecording?(a.stopRecording(),a.setState(Object(r.a)({},a.state,{isAnimationPaused:!0,downloadVideoDisabled:!1,isRecording:!1}))):(a.setState(Object(r.a)({},a.state,{flareController:new g(a.state.animationName),isAnimationPaused:!1,downloadVideoDisabled:!0,isRecording:!0})),a.startRecording())},a.handleDownloadVideo=function(e){if(e.preventDefault(),0!==a.recordedBlobs.length){var t=new Blob(a.recordedBlobs,{type:"video/"+a.state.videoType}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=n,i.download=a.state.animationName+"."+a.state.videoType,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(n)},100)}},a.handleFrameRateChange=function(e){var t=e.target.value,n=j(t,a.state.quality,a.state.resolution);console.log("Inside event handler bitrate is - "+n/1e6+"Mbps"),a.setState(Object(r.a)({},a.state,{frameRate:t,bitRate:n}))},a.handleVideoQualityChange=function(e){var t=e.target.options[e.target.selectedIndex].parentNode.label,n=a.state.frameRate,i=e.target.value,l=j(n,t,i);console.log("Inside event handler bitrate is - "+l/1e6+"Mbps"),a.setState(Object(r.a)({},a.state,{bitRate:l,quality:t,resolution:i}))},a.mediaRecorder=null,a.recordedBlobs=[],a.state={selectedFile:"",canvasWidth:500,canvasHeight:440,animationName:"",renderAnimation:!0,flareController:new g(""),animations:[],isAnimationPaused:!0,isRecording:!1,videoType:"mp4",bitRate:25e5,frameRate:30,quality:"SDR",resolution:"360p",downloadVideoDisabled:!0,playAnimationDisabled:!0,recordAnimationDisabled:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"startRecording",value:function(){var e=document.querySelector("canvas").captureStream(this.state.frameRate),t={mimeType:"video/"+this.state.videoType+";codecs=vp9",bitsPerSecond:this.setState.bitRate};this.recordedBlobs=[];try{this.mediaRecorder=new MediaRecorder(e,t)}catch(a){console.log("Unable to create MediaRecorder with options Object: ",a);try{t={mimeType:"video/webm;codecs=vp8",bitsPerSecond:this.setState.bitRate},this.mediaRecorder=new MediaRecorder(e,t)}catch(n){console.log("Unable to create MediaRecorder with options Object: ",n);try{t="video/"+this.state.videoType,this.mediaRecorder=new MediaRecorder(e,t)}catch(i){return alert("MediaRecorder is not supported by this browser.\n\nTry Firefox 29 or later, or Chrome 47 or later, with Enable experimental Web Platform features enabled from chrome://flags."),void console.error("Exception while creating MediaRecorder:",i)}}}this.mediaRecorder.onstop=this.handleStop.bind(this),this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(100)}},{key:"stopRecording",value:function(){this.mediaRecorder.stop(),console.log("Recorded Blobs: ",this.recordedBlobs),this.setState(Object(r.a)({},this.state,{downloadVideoDisabled:!1,startOrStopRecording:"Start Recording",isRecording:!1}))}},{key:"handleDataAvailable",value:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)}},{key:"handleStop",value:function(e){console.log("Recorder stopped: ",e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Flare-Exporter-Options"},i.a.createElement("div",null,""===this.state.selectedFile&&i.a.createElement("div",{className:"DropZoneStyle",style:{height:this.state.canvasHeight/2,width:this.state.canvasWidth,paddingTop:this.state.canvasHeight/2},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},"Drop a flare file here"),this.state.renderAnimation&&i.a.createElement("div",null,i.a.createElement(p.a,{width:this.state.canvasWidth,height:this.state.canvasHeight,animationName:this.state.animationName,file:this.state.selectedFile,controller:this.state.flareController,onLoadedAnimations:this.handleFlareComponentLoaded,isPaused:this.state.isAnimationPaused}))),i.a.createElement("div",null,i.a.createElement("input",{type:"file",onChange:this.handleFileSelect,className:"inputfile",name:"filechooser",id:"filechooser"}),i.a.createElement("div",{className:"IconButtons"},i.a.createElement(y,{handleClick:function(){},iconText:".flr",toggleClass:"pause",labelFor:"filechooser",label:"Choose",disabled:!1}),i.a.createElement(f,{label:"Width",type:"number",value:this.state.canvasWidth,onChange:this.handleCanvasWidthChange}),i.a.createElement(f,{label:"Height",type:"number",value:this.state.canvasHeight,onChange:this.handleCanvasHeightChange}),i.a.createElement(v,{label:"AnimationName",options:{"Available Animations":this.state.animations},handleChange:this.handleAnimationNameChange}),i.a.createElement(y,{handleClick:this.handlePlayPauseAnimation,buttonName:"Play",toggleClass:"pause",label:"Play",alterLabel:"Pause",disabled:this.state.playAnimationDisabled}),i.a.createElement("div",{className:"VerticalLine"}),i.a.createElement(y,{handleClick:this.handleRecording,buttonName:"Record",toggleClass:"stop",label:"Record",disabled:this.state.recordAnimationDisabled}),i.a.createElement(v,{label:"FrameRate",experimental:!0,options:{"Standard FrameRate":[24,25,30],"High FrameRate":[48,50,60]},handleChange:this.handleFrameRateChange}),i.a.createElement(v,{label:"Quality",experimental:!0,options:{SDR:["1440p","1080p","720p","480p","360p"],HDR:["1440p","1080p","720p"]},handleChange:this.handleVideoQualityChange}),i.a.createElement(v,{label:"Format",options:{"Video Format":["mp4","webm"]},handleChange:this.handleVideoTypeChange}),i.a.createElement(y,{handleClick:this.handleDownloadVideo,buttonName:"Download",label:"Download",disabled:this.state.downloadVideoDisabled}))))}}]),t}(n.Component),N=(a(43),a(30)),D=a.n(N),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){a.overlayRef.current.classList.toggle("appear")},a.markdown=fetch(a.props.mdfile).then(function(e){return e.text()}).then(function(e){a.setState(Object(r.a)({},a.state,{markdownText:e}))}),a.overlayRef=i.a.createRef(),a.state={markdownText:"relevant md file is missing."},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.markdownText;return i.a.createElement("div",null,i.a.createElement("div",{ref:this.overlayRef,onClick:this.handleClick,className:"Overlay"},i.a.createElement(D.a,{className:"OverlayText",source:e})),i.a.createElement("div",{className:this.props.styleName+"Button",onClick:this.handleClick},this.props.menuText))}}]),t}(n.Component),A=a(31),S=a.n(A),T=a(32),L=a.n(T);var F=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(k,{styleName:"Help",menuText:"Help?",mdfile:S.a}),i.a.createElement(w,null),i.a.createElement(k,{styleName:"Info",menuText:"Info!",mdfile:L.a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},20:function(e,t,a){},31:function(e,t,a){e.exports=a.p+"static/media/Help.66db96db.md"},32:function(e,t,a){e.exports=a.p+"static/media/Info.f0fbd95f.md"},33:function(e,t,a){e.exports=a(126)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){}},[[33,1,2]]]);
//# sourceMappingURL=main.869c8d47.chunk.js.map